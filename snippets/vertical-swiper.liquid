<style>
  .vertical-swiper {
    width: 100%;
    height: 100%;
  }
  .image_slide {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .swiper-slide {
    transition: transform 0.3s ease-out;
  }
</style>

<div class="vertical-swiper">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      {% if block.type == 'slide' %}
        <div class="swiper-slide">
          {% if block.settings.slide_image != blank %}
            <img class="image_slide" src="{{ block.settings.slide_image | image_url }}" height="" width="">
          {% else %}
            {{ 'hero-apparel-2' | placeholder_svg_tag: 'image_slide' }}
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<script defer="defer">
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.verticalSwipers) {
      window.verticalSwipers = [];
    }

    const verticalSwiperElements = document.querySelectorAll('.vertical-swiper');

    verticalSwiperElements.forEach((element, index) => {
      const swiperInstance = new Swiper(element, {
        direction: 'vertical',
        mousewheel: true,
        grabCursor: true,
        keyboard: {
          enabled: true,
        },
        on: {
          setTranslate(swiper, translate) {
            swiper.slides.forEach((slide, i) => {
              const slideProgress = slide.progress;

              // overlap effect
              if (slideProgress > 0) {
                // neeche wala slide upar aa raha hai
                slide.style.transform = `translateY(${slideProgress * -100}%)`;
                slide.style.zIndex = 10 + i;
              } else {
                // jo slide upar chala gaya
                slide.style.transform = `translateY(0%)`;
                slide.style.zIndex = i;
              }
            });
          },
        },
      });

      window.verticalSwipers[index] = swiperInstance;
    });

    if (window.verticalSwipers.length > 0) {
      window.verticalSwiper = window.verticalSwipers[0];
    }
  });
</script>
